!function(){"use strict";function n(){function n(n){if(angular.isDefined(n)&&null!==n){if(!angular.isString(n))throw Error("Invalid custom activation");t=n||t}}function r(){return t}var e=this,t="ggloader";e.$get=function(){return e},e.setCustomActivation=n,e.getQueryParamActivation=r}function r(n,r){function e(e){e=angular.isDefined(e)&&null!==e?"_"+e:"",r(function(){n.$broadcast("loader_show"+e)},0)}function t(e){e=angular.isDefined(e)&&null!==e?"_"+e:"",r(function(){n.$broadcast("loader_hide"+e)},0)}var o={show:e,hide:t};return o}function e(n,r,e){function t(n){return c(n,u(n))}function o(n){return f(n,u(n.config))}function a(n){return g(n,u(n.config))}function i(n){return f(n,u(n.config))}function u(n){var r=null;if(angular.isDefined(n.params)&&null!==n.params&&angular.isDefined(n.params[e.getQueryParamActivation()]))r=n.params[e.getQueryParamActivation()];else{if(n.url.indexOf(l)===-1)return"";var t=n.url.substring(n.url.indexOf("?"),n.url.length);r=t.substring(t.indexOf(l)+l.length,t.length),r.indexOf("&")>-1&&(r=r.substring(0,r.indexOf("&")))}return"false"!==r&&r!==!1&&(r="true"===r||r===!0?"":"_"+r)}function c(e,t){return t!==!1&&r.$broadcast("loader_show"+t),e||n.when(e)}function g(e,t){return t!==!1&&r.$broadcast("loader_hide"+t),e||n.when(e)}function f(e,t){return t!==!1&&r.$broadcast("loader_hide"+t),n.reject(e)}var l=e.getQueryParamActivation()+"=",s={request:t,requestError:o,response:a,responseError:i};return s}function t(){var n={restrict:"A",scope:{ggLoader:"@"},link:function(n,r,e){var t=n.ggLoader;t=t.length>0?"_"+t:"";var o=0;angular.element(r).hide(),n.$on("loader_show"+t,function(n){o++,angular.element(r).show()}),n.$on("loader_hide"+t,function(n){o>0&&0===--o&&angular.element(r).hide()})}};return n}var o=angular.module("nggs.loader",[]);o.provider("ggLoaderConfig",n),o.factory("ggLoader",r),r.$inject=["$rootScope","$timeout"],o.factory("ggLoaderInterceptor",e),e.$inject=["$q","$rootScope","ggLoaderConfig"],o.directive("ggLoader",t)}();