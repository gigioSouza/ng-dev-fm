!function(){"use strict";function n(){function n(){return o}function r(n){if(o=!0,"undefined"!=typeof n){if("string"!=typeof n)throw Error("Invalid custom activation");i=n||i}}function t(){return i}var e=this,o=!1,i="ggloader";e.$get=function(){return e},e.isActive=n,e.setCustomActivation=r,e.getQueryParamActivation=t}function r(n,r){function t(t){t="undefined"!=typeof t?"_"+t:"",r(function(){n.$broadcast("loader_show"+t)},0)}function e(t){t="undefined"!=typeof t?"_"+t:"",r(function(){n.$broadcast("loader_hide"+t)},0)}var o={show:t,hide:e};return o}function t(n,r,t){function e(r){return l?c(r)?d(r,f(r)):r||n.when(r):d(r)}function o(r){return l?c(r.config)?s(r,f(r.config)):n.reject(r):s(r)}function i(r){return l?c(r.config)?g(r,f(r.config)):r||n.when(r):g(r)}function a(r){return l?c(r.config)?s(r,f(r.config)):n.reject(r):s(r)}function c(n){var r=n.url.substring(n.url.indexOf("?"),n.url.length);return!!u(n.params[t.getQueryParamActivation()])||r.indexOf(h)>-1}function f(n){var r=null;if(u(n.params)&&u(n.params[t.getQueryParamActivation()]))r=n.params[t.getQueryParamActivation()];else{var e=n.url.substring(n.url.indexOf("?"),n.url.length);r=e.substring(e.indexOf(h)+h.length,e.length),r.indexOf("&")>-1&&(r=r.substring(0,r.indexOf("&")))}return r="true"==r?"":"_"+r}function d(t,e){return e=e||"",r.$broadcast("loader_show"+e),t||n.when(t)}function g(t,e){return e=e||"",r.$broadcast("loader_hide"+e),t||n.when(t)}function s(t,e){return e=e||"",r.$broadcast("loader_hide"+e),n.reject(t)}var l=t.isActive(),h=t.getQueryParamActivation()+"=",v={request:e,requestError:o,response:i,responseError:a};return v}function e(){var n={restrict:"A",scope:{ggLoader:"@"},link:function(n,r,t){var e=n.ggLoader;e=e.length>0?"_"+e:"";var o=0;$(r).hide(),n.$on("loader_show"+e,function(n){return o++,$(r).show()}),n.$on("loader_hide"+e,function(n){if(0===--o)return $(r).hide()})}};return n}function o(n,r){return n===r}function i(n){return o(n,void 0)}function u(n){return!i(n)}var a=angular.module("nggs.loader",[]);a.provider("ggLoaderConfig",n),a.factory("ggLoader",r),r.$inject=["$rootScope","$timeout"],a.factory("ggLoaderInterceptor",t),t.$inject=["$q","$rootScope","ggLoaderConfig"],a.directive("ggLoader",e)}();