!function(){"use strict";function r(){function r(){return r}function n(r){o=!0,i=r||i}function e(){return i}var t=this,o=!1,i="fmloader";t.$get=function(){return t},t.isAtivado=r,t.setAtivacao=n,t.getQueryParamAtivacao=e}function n(r,n,e){function t(n){if(!c)return u(n);var e=n.url.substring(n.url.indexOf("?"),n.url.length);return e.indexOf(d)>-1?u(n):n||r.when(n)}function o(n){if(!c)return f(n);var e=n.config.url.substring(n.config.url.indexOf("?"),n.config.url.length);return e.indexOf(d)>-1?f(n):n||r.when(n)}function i(n){if(!c)return a(n);var e=n.config.url.substring(n.config.url.indexOf("?"),n.config.url.length);return e.indexOf(d)>-1?a(n):r.reject(n)}function u(e){return s++,n.$broadcast("loader_show"),e||r.when(e)}function f(e){return 0===--s&&n.$broadcast("loader_hide"),e||r.when(e)}function a(e){return 0===--s&&n.$broadcast("loader_hide"),r.reject(e)}var c=e.isAtivado(),d=e.getQueryParamAtivacao()+"=true",s=0,l={request:t,response:o,responseError:i};return l}function e(){var r={restrict:"A",link:function(r,n,e){$(n).hide(),r.$on("loader_show",function(r){return $(n).show()}),r.$on("loader_hide",function(r){return $(n).hide()})}};return r}var t=angular.module("fm.loader",[]);t.provider("fmLoaderConfig",r),t.factory("fmLoaderInterceptor",n),n.$inject=["$q","$rootScope","fmLoaderConfig"],t.directive("fmLoader",e)}();